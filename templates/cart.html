<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Look order</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
<h3>
    Ваш заказ {{user.login}}
    <ul>
    {%for food_order in food_orders%}
    <li>Блюдо: {{food_order.food.name}}
        <br>Кол.порций:
            <button
                    class="count_minus"
                    data-minus="{{food_order.count - 1}}"
                    data-food_order_id="{{food_order.id}}"
            >-</button> {{food_order.count}}
            <button
                    class="count_plus"
                    data-plus="{{food_order.count + 1}}"
                    data-food_order_id="{{food_order.id}}"
            >+</button>
        <br>Цена: {{food_order.price * food_order.count}}
        <p>
    {%endfor%}
    </ul>
</h3>
</body>
</html>


<script>
 $(document).ready(function(){

     $(".count_minus").click(function(){
         var minus = $(this).attr("data-minus");
         var id = $(this).attr("data-food_order_id");

         $.ajax({
             url : '/cart_count',
             type: "POST",
             data: {count_minus:minus, id:id},
             success: function(data){
                 console.log(data);
             },
             error: function(error){
                 console.log(error);
                 alert(error.responseJSON);
             }

         });
     });


     $(".count_plus").click(function(){
         var plus = $(this).attr("data-plus");
         var id = $(this).attr("data-food_order_id");

         $.ajax({
             url : '/cart_count_plus',
             type: "POST",
             data: {count_plus:plus, id:id},
             success: function(data){
                 console.log(data);
             },
             error: function(error){
                 console.log(error);
                 alert(error.responseJSON);
             }

         });
     });


     });
</script>